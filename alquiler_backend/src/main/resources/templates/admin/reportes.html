<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Reportes - EasyCar Rent</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #0b3d91;
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
        }
        .container {
            margin-top: 3rem;
        }
        .card {
            background-color: #14213d;
            border: none;
            color: #fff;
            box-shadow: 0 0 12px rgba(255,255,255,0.15);
            transition: transform 0.2s ease-in-out;
        }
        .card:hover {
            transform: scale(1.02);
        }
        .card h4 {
            color: #fca311;
        }
        .table {
            background-color: #1a2a4a;
            color: #e0e0e0;
        }
        .table thead {
            background-color: #fca311;
            color: #000;
        }
        .btn-primary {
            background-color: #fca311;
            border: none;
        }
        .btn-primary:hover {
            background-color: #ffb703;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">ðŸ“Š Reportes del Sistema</h1>
        <p class="text-center mb-5">Visualiza los principales datos y estadÃ­sticas de EasyCar Rent</p>

        <!-- Resumen general -->
        <div class="row g-4 mb-5">
            <div class="col-md-3" th:each="dato : ${resumen}">
                <div class="card text-center p-3">
                    <h4 th:text="${dato.titulo}"></h4>
                    <h2 th:text="${dato.valor}"></h2>
                </div>
            </div>
        </div>

        <!-- Reporte de reservas -->
        <div class="card mb-5 p-3">
            <h3>ðŸš— Reservas Recientes</h3>
            <table class="table table-hover table-bordered mt-3">
                <thead>
                    <tr>
                        <th>ID Reserva</th>
                        <th>Cliente</th>
                        <th>VehÃ­culo</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Fin</th>
                        <th>Estado</th>
                        <th>Costo Estimado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="reserva : ${listaReservas}">
                        <td th:text="${reserva.id_reserva}"></td>
                        <td th:text="${reserva.cliente.nombre + ' ' + reserva.cliente.apellido}"></td>
                        <td th:text="${reserva.vehiculo.marca + ' ' + reserva.vehiculo.modelo}"></td>
                        <td th:text="${#dates.format(reserva.fecha_inicio, 'dd/MM/yyyy')}"></td>
                        <td th:text="${#dates.format(reserva.fecha_fin, 'dd/MM/yyyy')}"></td>
                        <td th:text="${reserva.estado}"></td>
                        <td th:text="${#numbers.formatDecimal(reserva.costo_estimado, 1, 'COMMA', 2, 'POINT')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Reporte de pagos -->
        <div class="card mb-5 p-3">
            <h3>ðŸ’° Pagos Realizados</h3>
            <table class="table table-hover table-bordered mt-3">
                <thead>
                    <tr>
                        <th>ID Pago</th>
                        <th>Cliente</th>
                        <th>MÃ©todo</th>
                        <th>Monto</th>
                        <th>Fecha</th>
                        <th>Comprobante</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="pago : ${listaPagos}">
                        <td th:text="${pago.id_pago}"></td>
                        <td th:text="${pago.comprobante.cliente.nombre + ' ' + pago.comprobante.cliente.apellido}"></td>
                        <td th:text="${pago.metodo_pago}"></td>
                        <td th:text="${#numbers.formatDecimal(pago.monto, 1, 'COMMA', 2, 'POINT')}"></td>
                        <td th:text="${#dates.format(pago.fecha_pago, 'dd/MM/yyyy HH:mm')}"></td>
                        <td th:text="${pago.comprobante.tipo_comprobante}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Reporte de vehÃ­culos -->
        <div class="card p-3 mb-5">
            <h3>ðŸš™ Estado de VehÃ­culos</h3>
            <table class="table table-hover table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Placa</th>
                        <th>Marca</th>
                        <th>Modelo</th>
                        <th>AÃ±o</th>
                        <th>Estado</th>
                        <th>Precio Diario</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="vehiculo : ${listaVehiculos}">
                        <td th:text="${vehiculo.placa}"></td>
                        <td th:text="${vehiculo.marca}"></td>
                        <td th:text="${vehiculo.modelo}"></td>
                        <td th:text="${vehiculo.anio}"></td>
                        <td th:text="${vehiculo.estado}"></td>
                        <td th:text="${#numbers.formatDecimal(vehiculo.precio_diario, 1, 'COMMA', 2, 'POINT')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="text-center mb-5">
            <a href="/dashboard" class="btn btn-primary">â¬… Volver al Panel</a>
        </div>
    </div>
</body>
</html>
